REPLACE_OR_CREATE:frost = {
	trigger = {
		is_vulnerable_to_frosts = yes
		OR = { 
			month = 11
			month = 12
			month = 1
			month = 2
		}
	}

	incompatible_with = drought
	incompatible_with = wildfire
	incompatible_with = heatwave
	incompatible_with = optimal_sunlight
	incompatible_with = moderate_rainfall
	incompatible_with = torrential_rains
	incompatible_with = flood
	incompatible_with = tsunami
	incompatible_with = earthquake
	# Incompatible with frost: drought, flood, wildfire, locust swarm, heatwave, torrential rains, pollinator surge, optimal sunlight, moderate rainfall
	# Replaces locust swarm, pollinator surge, optimal sunlight, moderate rainfall

	range = {
		integer_range = {
			min = 1
			max = 1
		}
	}

	duration = {
		fixed_range = {
			min = 5
			max = 20
		}
	}

	modifier = {
		#Throughput
		building_group_bg_agriculture_throughput_add = -0.05
		building_group_bg_plantations_throughput_add = -0.05

		#Subsistence
		state_peasants_consumption_multiplier_add = 0.03
	}

	intensity = {
		fixed_range = {
			min = 2
			max = 4
		}
	}

	chance = {
		value = 0.5
		if = {
			limit = {
				has_harvest_condition = hailstorm
			}
			multiply = 1.5
		}
	}

	color = { 47 127 185 }
	icon = "gfx/interface/icons/harvest_condition_icons/frost.dds"
	map_texture = "gfx/map/map_painting/harvest_conditions_map_patterns/harvest_conditions_bad.dds"
	graphics = frost
}

REPLACE_OR_CREATE:hailstorm = {
	trigger = {
		is_vulnerable_to_hailstorm = yes
		OR = { 
			month = 11
			month = 12
			month = 1
			month = 2
		}
	}

	incompatible_with = drought
	incompatible_with = wildfire
	incompatible_with = heatwave
	incompatible_with = optimal_sunlight
	incompatible_with = tsunami
	incompatible_with = earthquake
	# Incompatible with hailstorm: drought, wildfire, locusts, heatwave, pollinators, optimal sunlight, moderate rainfall
	# Replaces locusts, pollinators, moderate rainfall

	range = {
		integer_range = {
			min = 1
			max = 1
		}
	}

	duration = {
		fixed_range = {
			min = 5
			max = 20
		}
	}

	modifier = {
		# Throughput
		building_group_bg_agriculture_throughput_add = -0.05
		building_group_bg_plantations_throughput_add = -0.05
		#building_group_bg_ranching_throughput_add = -0.05
		building_group_bg_logging_throughput_add = -0.05
	}

	intensity = {
		fixed_range = {
			min = 2
			max = 4
		}
		if = {
			limit = {
				has_global_variable = krakatoa_temperature_drop
			}
			add = global_var:krakatoa_temperature_drop
		}
	}

	chance = {
		value = 0.0025
		if = {
			limit = {
				OR = {
					has_harvest_condition = frost
					has_harvest_condition = torrential_rains
				}
			}
			multiply = 1.3
		}
	}

	color = { 70 234 255 }
	icon = "gfx/interface/icons/harvest_condition_icons/hailstorm.dds"
	map_texture = "gfx/map/map_painting/harvest_conditions_map_patterns/harvest_conditions_bad.dds"
	graphics = hail
}

REPLACE_OR_CREATE:flood = {
	trigger = {
		is_vulnerable_to_floods = yes
	}

	incompatible_with = drought
	incompatible_with = wildfire
	incompatible_with = frost
	incompatible_with = tsunami
	incompatible_with = earthquake
	# Incompatible with flood: frost, wildfire, torrential rains, pollinator surge, optimal sunlight, moderate rainfall, drought
	# Replaces torrential rains, pollinator surge, optimal sunlight, moderate rainfall

	range = {
		integer_range = {
			min = 1
			max = 2
		}
	}

	duration = {
		fixed_range = {
			min = 4
			max = 20
		}
	}

	modifier = {
		#Infrastructure
		state_infrastructure_mult = -0.05

		#MAPI
		state_market_access_price_impact = -0.05

		#Throughput
		building_group_bg_agriculture_throughput_add = -0.05
		building_group_bg_plantations_throughput_add = -0.05
		#building_group_bg_ranching_throughput_add = -0.05
		building_group_bg_extraction_throughput_add = -0.05

		#Subsistence
		state_peasants_consumption_multiplier_add = 0.025
	}

	intensity = {
		fixed_range = {
			min = 3
			max = 6
		}
	}

	chance = {
		value = 0.0025
		if = {
			limit = {
				OR = {
					has_harvest_condition = moderate_rainfall
					has_harvest_condition = heatwave
				}
			}
			multiply = 1.2
		}
		if = {
			limit = {
				has_harvest_condition = hailstorm
			}
			multiply = 1.1
		}
		if = {
			limit = {
				has_harvest_condition = torrential_rains
			}
			multiply = 1.5
		}
	}

	color = { 85 65 8 }
	icon = "gfx/interface/icons/harvest_condition_icons/flood.dds"
	map_texture = "gfx/map/map_painting/harvest_conditions_map_patterns/harvest_conditions_bad.dds"
	graphics = flood
}

REPLACE_OR_CREATE:torrential_rains = {
	trigger = {
		is_vulnerable_to_torrential_rains = yes
	}

	incompatible_with = drought
	incompatible_with = wildfire
	incompatible_with = flood
	incompatible_with = frost
	# Incompatible with Torrential Rains: drought, frost, wildfire, locusts, pollinators, optimal sunlight, moderate rainfall
	# Replaces locusts, pollinators, optimal sunlight, moderate rainfall

	range = {
		integer_range = {
			min = 1
			max = 2
		}
	}

	duration = {
		fixed_range = {
			min = 5
			max = 20
		}
	}

	modifier = {
		# Throughput
		building_group_bg_agriculture_throughput_add = -0.05
		building_group_bg_plantations_throughput_add = -0.05
		#building_group_bg_ranching_throughput_add = -0.03
		building_group_bg_extraction_throughput_add = -0.03

		#Infra
		state_infrastructure_mult = -0.1
	}

	intensity = {
		fixed_range = {
			min = 2
			max = 5
		}
		if = {
			limit = {
				has_global_variable = krakatoa_temperature_drop
			}
			add = global_var:krakatoa_temperature_drop
		}
	}

	chance = {
		value = 0.003
		if = {
			limit = {
				OR = {
					has_harvest_condition = heatwave
					has_harvest_condition = moderate_rainfall
				}
			}
			multiply = 1.3
		}
	}


	color = { 34 75 120 } # darker slate gray
	icon = "gfx/interface/icons/harvest_condition_icons/torrential_rains.dds"
	map_texture = "gfx/map/map_painting/harvest_conditions_map_patterns/harvest_conditions_bad.dds"
	graphics = torrential_rains
}

REPLACE_OR_CREATE:moderate_rainfall = {
	trigger = {
		has_potential_for_moderate_rainfall = yes
	}

	incompatible_with = drought
	incompatible_with = flood
	incompatible_with = frost
	incompatible_with = wildfire
	incompatible_with = hailstorm
	incompatible_with = torrential_rains
	#Incompatible with Moderate Rainfall: drought, frost, wildfire

	range = {
		integer_range = {
			min = 1
			max = 2
		}
	}

	duration = {
		fixed_range = {
			min = 5
			max = 20
		}
	}

	modifier = {
		# Throughput
		building_group_bg_agriculture_throughput_add = 0.05
		building_group_bg_plantations_throughput_add = 0.05
		building_group_bg_ranching_throughput_add = 0.03

		#Subsistence
		state_peasants_consumption_multiplier_add = -0.01
	}

	intensity = {
		fixed_range = {
			min = 2
			max = 4
		}
	}

	chance = {
		value = 0.003
	}

	color = { 65 100 250 }
	icon = "gfx/interface/icons/harvest_condition_icons/moderate_rainfall.dds"
	map_texture = "gfx/map/map_painting/harvest_conditions_map_patterns/harvest_conditions_good.dds"
}