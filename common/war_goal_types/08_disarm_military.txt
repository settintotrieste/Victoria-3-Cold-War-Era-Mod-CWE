disarm_military = {
	icon = "gfx/interface/icons/lens_toolbar_icons/enforce_military_access break.dds"

	kind = custom

	settings = {
		require_target_be_part_of_war

		# Validation
		validate_conflicts_war_goals_all
	}

	execution_priority = 17

	contestion_type = control_target_country_capital

	target_type = country

	possible = {
		# trigger to determine if a goal with its target data is listed when selecting a war goal in the diplo play panel
		# scopes: root = holder, creator_country, diplomatic_play, target_country, target_state, stakeholder, target_region, article_options
		
		#TARGET has military
		scope:target_country = {
			NOT = { has_law_or_variant = law_type:law_peasant_levies }
		}
	}

	valid = {
		# trigger in addition to some basic validation code-side
		# scopes: root = holder, creator_country, diplomatic_play, target_country, target_state, stakeholder, target_region, article_options
		
		#TARGET has military
		scope:target_country = {
			NOT = { has_law_or_variant = law_type:law_peasant_levies }
		}
	}

	maneuvers = {
		value = 0

		add = {
			desc = "MANEUVERS_BASE_VALUE"
			value = 20
		}
	}

	infamy = {
		value = 0
	}

	on_enforced = {
		# script effect on top of the predefined code effect
		
		#Disarm country
		scope:target_country ?= { enforce_disarm_country_effect = yes }
		
		#TARGET will dissolve all station nuclear weapons pacts
		every_country = { 
			limit = { has_diplomatic_pact = { who = scope:target_country type = station_nuclear_weapons is_initiator = yes } }
			remove_diplomatic_pact = { country = scope:target_country type = station_nuclear_weapons } 
		}
		every_country = { 
			limit = { has_diplomatic_pact = { who = scope:target_country type = military_cooperation_agreement is_initiator = yes } }
			remove_diplomatic_pact = { country = scope:target_country type = military_cooperation_agreement } 
		}
		
	}

	ai = {
		is_significant_demand = no
	}
}
