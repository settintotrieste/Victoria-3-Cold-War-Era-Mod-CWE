take_treaty_port = {
	icon = "gfx/interface/icons/war_goals/take_treaty_port.dds"

	kind = take_treaty_port

	settings = {
		require_target_be_part_of_war
		can_add_for_other_country
		skip_build_list
		requires_interest

		# Validation
		validate_conflicts_conquer_state
		validate_take_treaty_port
		conflicts_with_annex_state
	}

	target_type = state

	possible = {
		# trigger to determine if a goal with its target data is listed when selecting a war goal in the diplo play panel
		# scopes: root = holder, creator_country, diplomatic_play, target_country, target_state, stakeholder, target_region, article_options
		# scopes: root = holder, creator_country, diplomatic_play, target_country, target_state, stakeholder, target_region, article_options
	}

	valid = {
		# trigger in addition to some basic validation code-side
		# scopes: root = holder, creator_country, diplomatic_play, target_country, target_state, stakeholder, target_region, article_options
		OR = {
			scope:target_state = {
				state_region = {
					any_scope_state = {
						NOT = { owner = root }
					}
				}
			}
			NOT = { has_law_or_variant = law_type:law_isolationism }
		}

		scope:target_state = {
			owner = scope:target_country
			is_potential_treaty_port = root
		}
	}

	maneuvers = {
		value = 0

		add = {
			desc = "MANEUVERS_BASE_VALUE"
			value = 5
		}

		multiply = {
			desc = "MANEUVERS_TARGET_STATE_POPULATION_FACTOR"
			value = scope:target_state.state_population
			divide = define:NDiplomacy|SWAY_OFFER_WARGOAL_MANEUVERS_COST_POPULATION_SCALING_FACTOR
			multiply = define:NDiplomacy|SWAY_OFFER_WARGOAL_MANEUVERS_COST_POPULATION_SCALING_MULTIPLIER
			max = define:NDiplomacy|SWAY_OFFER_WARGOAL_MANEUVERS_COST_POPULATION_SCALING_MULTIPLIER_MAX_PER_STATE
		}
	}

	infamy = {
		value = 0

		add = {
			desc = "INFAMY_BASE_VALUE"
			value = 2
		}

		multiply = {
			desc = "INFAMY_STATE_POPULATION_FACTOR"
			value = scope:target_state.state_population
			divide = define:NDiplomacy|WAR_GOAL_INFAMY_POPULATION_SCALING_FACTOR
			multiply = define:NDiplomacy|WAR_GOAL_INFAMY_POPULATION_SCALING_MULTIPLIER
			add = 1
			max = define:NDiplomacy|WAR_GOAL_INFAMY_POPULATION_SCALING_MULTIPLIER_MAX_PER_STATE
		}
		add = {
			desc = "INFAMY_STATE_GDP_FACTOR"
			value = scope:target_state.gdp
			divide = 50000
			max = 5
		}

		multiply = {
			desc = "country_infamy_generation_against_unrecognized_mult"
			value = 1
			if = {
				limit = {
					scope:target_country = {
						is_country_type = unrecognized
					}
				}
				add = modifier:country_infamy_generation_against_unrecognized_mult
			}
		}

		multiply = {
			desc = "IG_OTHER_FACTORS_HEADER"
			value = 1

			if = {
				limit = {
					scope:target_state = {
						is_homeland_of_country_cultures = root
					}
				}
				add = define:NDiplomacy|WAR_GOAL_INFAMY_HOMELAND_FACTOR
			}

			if = {
				limit = {
					scope:target_state = {
						is_incorporated = no
					}
				}
				add = define:NDiplomacy|WAR_GOAL_INFAMY_UNINCORPORATED_FACTOR
			}
		}

		min = 2
	}

	on_enforced = {
		# script effect on top of the predefined code effect
	}

	ai = {
		is_significant_demand = no
	}
}
