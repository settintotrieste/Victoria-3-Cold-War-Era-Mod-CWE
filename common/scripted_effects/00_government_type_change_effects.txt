change_to_parliamentary_elective = {
	clean_up_any_monarchs = yes
}

post_change_to_parliamentary_elective = {
	if = {
		limit = { 
			has_variable = monarchy_deposed_recently 
			ruler ?= { NOT = { has_modifier = monarch_character } is_historical = no }
			NOT = { has_variable = change_ruler_regime_change_exemption }
		}
		get_ruler_for:parliamentary_elective ?= {
			set_character_as_ruler = yes
		}
	}
}

change_to_presidential_elective = {
	clean_up_any_monarchs = yes
}

post_change_to_presidential_elective = {
	if = {
		limit = { 
			has_variable = monarchy_deposed_recently 
			ruler ?= { NOT = { has_modifier = monarch_character } is_historical = no }
			NOT = { has_variable = change_ruler_regime_change_exemption }
		}
		get_ruler_for:presidential_elective ?= {
			set_character_as_ruler = yes
		}
	}
}

change_to_dictatorial = {
	clean_up_any_monarchs = yes
}

post_change_to_dictatorial = {
	if = {
		limit = { 
			has_variable = monarchy_deposed_recently 
			ruler ?= { NOT = { has_modifier = monarch_character } is_historical = no }
			NOT = { has_variable = change_ruler_regime_change_exemption }
		}
		get_ruler_for:dictatorial ?= {
			set_character_as_ruler = yes
		}
	}
	if = {
		limit = { is_a_foreign_regime_monarchy = yes }
		generate_viceroy_for_country = yes
	}
}

change_to_hereditary = {

	#Presidents make themselves King
	if = {
		limit = { 
			OR = { 
				government_transfer_of_power = dictatorial 
				government_transfer_of_power = presidential_elective
			}
			is_a_colonial_government = no
			shares_same_monarch = no
		}
		ruler ?= {
			set_character_as_monarch = yes
		}
	}
	
	#Prime ministers find a king
	else = {
		generate_monarch_for_country = yes
	}
	
}

post_change_to_hereditary = {
	if = {
		limit = {
			NOT = {
				any_scope_character = {
					has_modifier = monarch_character
				}
			}
		}
		generate_monarch_for_country = yes
	}
	else_if = {
		limit = {
			any_scope_character = {
				has_modifier = monarch_character
				is_ruler = no
			}
		}
		random_scope_character = {
			limit = {
				has_modifier = monarch_character
				is_ruler = no
			}
			set_character_as_monarch = yes
		}
	}
}

change_to_regency = {

	#Clean up
	ruler ?= {
		if = {
			limit = { has_modifier = monarch_character }
			remove_modifier = monarch_character
		}
	}
	heir ?= {
		if = {
			limit = { NOT = { has_modifier = monarch_character } }
			add_modifier = { name = monarch_character }
		}
	}

}

post_change_to_regency = {
	
	#Clean up
	ruler ?= {
		if = {
			limit = { has_modifier = monarch_character }
			remove_modifier = monarch_character
		}
	}
	heir ?= {
		if = {
			limit = { NOT = { has_modifier = monarch_character } }
			add_modifier = { name = monarch_character }
		}
	}

}