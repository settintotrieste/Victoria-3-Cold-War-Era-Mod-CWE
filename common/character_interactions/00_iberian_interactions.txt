proclaim_regent_monarch = {
    icon = "gfx/interface/icons/ideology_icons/ideology_leader/ideology_leader_royalist.dds"
	potential = {
		is_ruler = yes
		owner ?= {
			has_gov_regency = yes
		}
	}

	possible = {
        custom_tooltip = {
            text = no_heir_tt
            NOT = {
                exists = owner.heir
            }
        }
        custom_tooltip = {
            text = eterna_regency_tt
            has_variable = regency_years
            var:regency_years > 10
        }
	}

	effect = {
        hidden_effect = {
            if = {
                limit = {
                    is_immortal = yes
                }
                set_character_immortal = no
            }
        }
        owner = {
            if = {
                limit = {
                    ruler ?= {
                        is_female = yes
                    }
                }
                custom_tooltip = female_regent_becomes_monarch_tt
            }
            if = {
                limit = {
                    ruler ?= {
                        is_female = no
                    }
                }
                custom_tooltip = male_regent_becomes_monarch_tt
            }
            if = { # Sorts an edge case
                limit = {
                    NAND = {
                        root.popularity < 27
                        root.popularity > 23
                    }
                }
                custom_tooltip = effects_depend_on_popularity_tt
                add_modifier = {
                    name = modifier_new_royal_dynasty
                    days = long_modifier_time
                    is_decaying = yes
                    multiplier = {
                        value = root.popularity
                        subtract = 25
                        divide = 2
                        min = -25
                        max = 25
                    }
                }
            }
            remove_regency_modifier = yes
        }
	}

	cooldown = { days = long_modifier_time }
	show_confirmation_box = yes

	ai_chance = {
		value = 1
	}
}
