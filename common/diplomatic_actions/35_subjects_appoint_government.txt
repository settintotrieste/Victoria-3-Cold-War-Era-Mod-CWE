da_appoint_subject_ruler = {
	groups = { overlord }
	
	requires_approval = no
	should_notify_third_parties = yes
	show_effect_in_tooltip = yes

	texture = "gfx/interface/icons/diplomatic_action_icons/da_appoint_subject_ruler.dds"
	confirmation_sound = "event:/SFX/UI/MapInteraction/SubjectInteractions/diplomatic_action_subjects_04_appoint_governor_benign"
	selectable = {
		is_revolutionary = no is_secessionist = no
	}
	
	potential = {
		scope:target_country = {
			NOT = { has_variable = gubernatorial_candidate }
			NOT = { is_diplomatic_play_enemy_of = root }
			NOT = { ruler_is_governor_general = yes }
			NOT = { is_sufficiently_independent = yes }
		}
	}
	
	possible = {
		custom_tooltip = {
			text = "APPOINT_COLONIAL_GOVERNOR_ON_COOLDOWN"
			scope:target_country = {
				NOR = { 
					has_variable = gubernatorial_candidate 
					has_variable = gubernatorial_candidate_timed
				}
			}
		}
		scope:target_country = {
			OR = {
				is_sufficiently_independent = no
				AND = {
					is_sufficiently_independent = yes
					trigger_if = {
						limit = { 
							is_a_monarchy = yes 
							shares_same_monarch = yes
						}
						always = yes
					}
					trigger_else = {
						scope:actor = { has_diplomatic_pact = { who = scope:target_country type = military_cooperation_agreement is_initiator = yes } }
					}
				}
			}
		}
	}

	accept_effect = {
		scope:target_country = {
			set_variable = gubernatorial_candidate
			set_variable = {
				name = gubernatorial_candidate_timed
				days = normal_modifier_time
			}
			post_notification = appointed_new_subject_ruler_notification
		}
		set_variable = { name = replace_subject_ruler days = 100 }
		trigger_event = { id = subject_interactions.1 popup = yes }
	}
	
	ai = {
		evaluation_chance = {
			value = 0.25		
		}		
	
		propose_score = {
			value = 10
		}
	
		will_propose = {
			"ai_ideological_opinion(scope:target_country)" <= -25
			OR = {
				scope:target_country = { liberty_desire < define:NDiplomacy|WAR_GOAL_INFAMY_LOW_LIBERTY_DESIRE_THRESHOLD }
				has_attitude = {
					who = scope:target_country
					attitude = domineering
				}						
			}
			OR = {
				has_strategy = ai_strategy_maintain_power_balance
				has_strategy = ai_strategy_anti_imperialism
				has_strategy = ai_strategy_world_revolution
			}		
		}				
	}
	
}
