conduct_hostile_espionage = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		#THIS is not decentralized
		NOT = { is_country_type = decentralized }
		scope:target_country = { NOT = { is_country_type = decentralized } }
		
		#THIS has intelligence services
		has_law = law_type:law_offensive_espionage
		
		#THIS and Target are not revolutionary
		is_revolutionary = no is_secessionist = no
		scope:target_country = { is_revolutionary = no is_secessionist = no } 
		
		#THIS is not broke
		in_default = no
		
		#THIS is of a higher rank than the Target OR is a Great Power and above
		OR = { 
			scope:target_country = { country_rank < root.country_rank }
			country_rank >= rank_value:great_power
		}
		
		#THIS is sufficiently independent
		is_sufficiently_independent = yes
		
	}
	
	possible = {
		
		#THIS is interested in Target
		has_diplomatic_relevance = scope:target_country
		
		#THIS is not friendly with Target in anyway
		NOR = { 
			has_diplomatic_pact = { who = scope:target_country type = increase_relations }
			has_diplomatic_pact = { who = scope:target_country type = bankroll }
			any_scope_treaty = { binds = scope:target_country any_scope_article = { has_type = alliance } }
			any_scope_treaty = { binds = scope:target_country any_scope_article = { has_type = defensive_pact } } 
			any_scope_treaty = { binds = scope:target_country any_scope_article = { has_type = guarantee_independence } }
		}
		
		#Country wants to meddle in other's affairs
		OR = { 
		
			#Leader is aggressive
			AND = { 
				exists = ruler
				ruler = {
					OR = {
						has_ideology = ideology:ideology_autocratic
						has_ideology = ideology:ideology_power_hungry
						has_ideology = ideology:ideology_elitist
					}
				}
			}
			
			#Target is a rival of THIS
			has_diplomatic_pact = { who = scope:target_country type = rivalry is_initiator = yes }
			
		}
		
		#THIS is not friendly with Target
		custom_tooltip = {
			text = DIPLO_ACTION_RELATIONS_NEUTRAL_OR_LESS
			scope:target_country.relations:root < relations_threshold:cordial
		}
		
	}
	
	accept_effect = {
		add_lobby_appeasement_from_diplomacy_unidirectional = { 
			FIRST = root
			SECOND = scope:target_country 
			PRO_AMOUNT = -4
			ANTI_AMOUNT = 4
			FACTOR = appeasement_embargo_declared
		}
	}
	
	pact = {	
		cost = 50
		is_hostile = yes
		is_two_sided_pact = no
		infamy_affects_maintenance = yes
		
		income_transfer = 0.01
		max_paying_country_income_to_transfer = 0.05
		second_country_gets_income_transfer = yes
		income_transfer_based_on_second_country = yes
		income_transfer_to_pops = {
			allow_discriminated = yes
			upper_strata_pops = {
				value = 0.5
				
				if = {
					limit = {
						is_a_dictatorship = yes
						NOT = { is_a_communist_government = yes }		
					}
					add = 0.5
				}
				
				max = 1
				min = 0
			}
			middle_strata_pops = {
				value = 0.25
				
				if = {
					limit = {
						is_a_democracy = yes					
					}
					add = 0.25
				}	

				max = 1
				min = 0				
			}
			lower_strata_pops = {
				value = 0.0
				
				if = {
					limit = {
						is_a_communist_government = yes
					}
					add = 0.25
				}	

				max = 1
				min = 0				
			}
		}
		
		### Validation requirements ###
		
		requirement_to_maintain = { 
		
			trigger = { 
			
				#THIS is not decentralized
				NOT = { is_country_type = decentralized }
				scope:target_country = { NOT = { is_country_type = decentralized } }
				
				#THIS has intelligence services
				has_law = law_type:law_offensive_espionage
				
				#THIS and Target are not revolutionary
				is_revolutionary = no is_secessionist = no
				scope:target_country = { is_revolutionary = no is_secessionist = no } 
				
				#THIS is not broke
				in_default = no
				
				#THIS is of a higher rank than the Target OR is a Great Power and above
				OR = { 
					scope:target_country = { country_rank < root.country_rank }
					country_rank >= rank_value:great_power
				}
				
				#THIS is sufficiently independent
				is_sufficiently_independent = yes
				
				#THIS is not friendly with Target in anyway
				NOR = { 
					has_diplomatic_pact = { who = scope:target_country type = increase_relations }
					has_diplomatic_pact = { who = scope:target_country type = bankroll }
					any_scope_treaty = { binds = scope:target_country any_scope_article = { has_type = alliance } }
					any_scope_treaty = { binds = scope:target_country any_scope_article = { has_type = defensive_pact } } 
					any_scope_treaty = { binds = scope:target_country any_scope_article = { has_type = guarantee_independence } }
				}
				
				#THIS is not friendly with Target
				custom_tooltip = {
					text = DIPLO_ACTION_RELATIONS_NEUTRAL_OR_LESS
					scope:target_country.relations:root < relations_threshold:cordial
				}
				
			}
			
		}
		
		requirement_to_maintain = { 
		
			trigger = { 
			
				NOT = { is_in_same_power_bloc = scope:target_country }
				
			}
			
		}
		
		### Effects added by Espionage JE ### 
		
		monthly_effect = {
			
			## Basic Effect - Increase radicals from discriminated ##
			scope:target_country = {
				random_scope_pop = {
					limit = { pop_acceptance < acceptance_status_4 }
					culture = { save_scope_as = discrimated_culture_to_radicalise }
				}
				if = {
					limit = { exists = scope:discrimated_culture_to_radicalise }
					if = {
						limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
						add_radicals = { 
							value = 0.008
							culture = scope:discrimated_culture_to_radicalise
						}
					}
					else_if = {
						limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
						add_radicals = { 
							value = 0.006
							culture = scope:discrimated_culture_to_radicalise
						}
					}
					else_if = {
						limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
						add_radicals = { 
							value = 0.004
							culture = scope:discrimated_culture_to_radicalise
						}
					}
					else_if = {
						limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
						add_radicals = { 
							value = 0.002
							culture = scope:discrimated_culture_to_radicalise
						}
					}
					else_if = {
						limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
						add_radicals = { 
							value = 0.001
							culture = scope:discrimated_culture_to_radicalise
						}
					}
					else = {
						add_radicals = { 
							value = 0.01
							culture = scope:discrimated_culture_to_radicalise
						}
					}
				}
			}
			
		}
		
	}
	
	ai = {
		max_influence_spending_fraction = 0.20
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			OR = { 
				AND = { 
					OR = {
						has_attitude = { who = scope:target_country attitude = antagonistic }
						has_attitude = { who = scope:target_country attitude = belligerent }
						has_attitude = { who = scope:target_country attitude = domineering }
					}
					OR = {
						country_rank >= rank_value:great_power
						scope:target_country = { any_scope_state = { is_homeland_of_country_cultures = scope:actor } }
					}
				}
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
			}
		}
		
		will_break = {
			NOR = { 
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
				scope:target_country.infamy >= infamy_threshold:pariah
			}
			NOR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Instigate Domestic Unrest [ONLY possible if country has an open media]
conduct_hostile_espionage_1 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
		#TARGET has an open media to exploit
		scope:target_country = { 
			country_has_an_open_media = yes 
		}
		
	}
	
	possible = {
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Instigate Domestic Unrest
		set_variable = { name = espionage_attacker_var months = 2 }
		scope:target_country = {
			
			#Defence by the other side
			if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
				random_list = { 
					1 = { }
					1 = { trigger_event = { id = espionage_system.2 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
				random_list = { 
					1 = { }
					2 = { trigger_event = { id = espionage_system.2 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
				random_list = { 
					1 = { }
					3 = { trigger_event = { id = espionage_system.2 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
				random_list = { 
					1 = { }
					4 = { trigger_event = { id = espionage_system.2 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
				random_list = { 
					1 = { }
					5 = { trigger_event = { id = espionage_system.2 } }
				}
			}
			else = {
				trigger_event = { id = espionage_system.2 }
			}
			
		}
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Conduct Economic Sabotage
conduct_hostile_espionage_2 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
	}
	
	possible = {
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Conduct Economic Sabotage
		set_variable = { name = espionage_attacker_var months = 2 }
		scope:target_country = {
		
			#Defence by the other side
			if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
				random_list = { 
					1 = { }
					1 = { trigger_event = { id = espionage_system.4 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
				random_list = { 
					1 = { }
					2 = { trigger_event = { id = espionage_system.4 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
				random_list = { 
					1 = { }
					3 = { trigger_event = { id = espionage_system.4 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
				random_list = { 
					1 = { }
					4 = { trigger_event = { id = espionage_system.4 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
				random_list = { 
					1 = { }
					5 = { trigger_event = { id = espionage_system.4 } }
				}
			}
			else = {
				trigger_event = { id = espionage_system.4 }
			}
			
		}
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Instigate Secessionist Movement
conduct_hostile_espionage_3 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
		#Has secessionist states
		scope:target_country = {
			num_incorporated_states > 1
			OR = {
				has_journal_entry = je_apartheid
				any_scope_state = {
					OR = { 
						NOT = { is_homeland_of_country_cultures = ROOT }
						is_incorporated = no
					}
				}
			}
		}
		
	}
	
	possible = {
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Instigate Secessionist Movement
		set_variable = { name = espionage_attacker_var months = 2 }
		scope:target_country = {
		
			#Defence by the other side
			if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
				random_list = { 
					1 = { }
					1 = { trigger_event = { id = espionage_system.6 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
				random_list = { 
					1 = { }
					2 = { trigger_event = { id = espionage_system.6 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
				random_list = { 
					1 = { }
					3 = { trigger_event = { id = espionage_system.6 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
				random_list = { 
					1 = { }
					4 = { trigger_event = { id = espionage_system.6 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
				random_list = { 
					1 = { }
					5 = { trigger_event = { id = espionage_system.6 } }
				}
			}
			else = {
				trigger_event = { id = espionage_system.6 }
			}
			
		}
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Election Interference [ONLY possible if country has a ruling party & is having elections]
conduct_hostile_espionage_4 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
		#Has the appropriate law
		scope:target_country = { country_has_voting_franchise = yes }
		
	}
	
	possible = {
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
		#There is a party to sabotage
		scope:target_country = {
			any_interest_group = { 
				exists = leader 
				leader = { is_ruler = yes }
				has_party = yes
			}
			in_election_campaign = yes
		} 
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Election Interference
		set_variable = { name = espionage_attacker_var months = 2 }
		scope:target_country = {
			
			#Defence by the other side
			if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
				random_list = { 
					1 = { }
					1 = { trigger_event = { id = espionage_system.8 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
				random_list = { 
					1 = { }
					2 = { trigger_event = { id = espionage_system.8 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
				random_list = { 
					1 = { }
					3 = { trigger_event = { id = espionage_system.8 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
				random_list = { 
					1 = { }
					4 = { trigger_event = { id = espionage_system.8 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
				random_list = { 
					1 = { }
					5 = { trigger_event = { id = espionage_system.8 } }
				}
			}
			else = {
				trigger_event = { id = espionage_system.8 }
			}
			
		}
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Terror attack
conduct_hostile_espionage_5 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
		#Has the appropriate law
		scope:target_country = { 
		
			#Borders are open for terrorists to enter
			NOT = { has_law = law_type:law_closed_borders }
		
			#There is at least some turmoil in TARGET
			any_scope_state = { turmoil >= 0.2 }
			
		}
		
	}
	
	possible = {
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Terror attack
		set_variable = { name = espionage_attacker_var months = 2 }
		scope:target_country = {
			
			#Defence by the other side
			if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
				random_list = { 
					1 = { }
					1 = { trigger_event = { id = espionage_system.10 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
				random_list = { 
					1 = { }
					2 = { trigger_event = { id = espionage_system.10 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
				random_list = { 
					1 = { }
					3 = { trigger_event = { id = espionage_system.10 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
				random_list = { 
					1 = { }
					4 = { trigger_event = { id = espionage_system.10 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
				random_list = { 
					1 = { }
					5 = { trigger_event = { id = espionage_system.10 } }
				}
			}
			else = {
				trigger_event = { id = espionage_system.10 }
			}
			
		}
		
		#Gain infamy
		change_infamy = 5
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			infamy < infamy_threshold:infamous
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Cyber attack
conduct_hostile_espionage_6 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_communication_infrastructure_6
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
	}
	
	possible = {
		
		#TARGET is not already suffering from a cyber attack
		scope:target_country = { 
			any_scope_building = {
				is_building_type = building_communications_network
				OR = { 
					has_active_production_method = pm_gps_service
					NOT = { has_active_production_method = pm_no_internet_services }
				}
				NOT = { has_modifier = cyber_attack }
			}
		}
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Terror attack
		set_variable = { name = espionage_attacker_var months = 2 }
		scope:target_country = {
			
			#Defence by the other side
			if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 1 } }
				random_list = { 
					1 = { }
					1 = { trigger_event = { id = espionage_system.12 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 2 } }
				random_list = { 
					1 = { }
					2 = { trigger_event = { id = espionage_system.12 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 3 } }
				random_list = { 
					1 = { }
					3 = { trigger_event = { id = espionage_system.12 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 4 } }
				random_list = { 
					1 = { }
					4 = { trigger_event = { id = espionage_system.12 } }
				}
			}
			else_if = {
				limit = { institution_investment_level = { institution = institution_espionage value = 5 } }
				random_list = { 
					1 = { }
					5 = { trigger_event = { id = espionage_system.12 } }
				}
			}
			else = {
				trigger_event = { id = espionage_system.12 }
			}
			
		}
		
		#Gain infamy
		change_infamy = 5
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			infamy < infamy_threshold:infamous
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Send agitator to TARGET
conduct_hostile_espionage_7 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
	}
	
	possible = {
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_50_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 50
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
		#TARGET has space for agitator
		scope:target_country = { 
			empty_agitator_slots >= 1 
			NOT = { has_law = law_type:law_closed_borders }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_50_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -50
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Send agitator to TARGET
		if = {
			limit = { is_a_democracy = yes }
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_pro_human_rights
							has_ideology = ideology:ideology_agitator_anti_war_rights
						
							has_ideology = ideology:ideology_liberal
							has_ideology = ideology:ideology_democratic
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_pro_human_rights
							has_ideology = ideology:ideology_agitator_anti_war_rights
						
							has_ideology = ideology:ideology_liberal
							has_ideology = ideology:ideology_democratic
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_pro_human_rights
							has_ideology = ideology:ideology_agitator_anti_war_rights
						
							has_ideology = ideology:ideology_liberal
							has_ideology = ideology:ideology_democratic
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_pro_human_rights
							has_ideology = ideology:ideology_agitator_anti_war_rights
						
							has_ideology = ideology:ideology_liberal
							has_ideology = ideology:ideology_democratic
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_pro_human_rights
					}
				}
			}
		}
		
		if = {
			limit = { NOT = { is_a_democracy = yes } }
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_anti_human_rights
							has_ideology = ideology:ideology_agitator_pro_war_rights
						
							has_ideology = ideology:ideology_autocratic
							has_ideology = ideology:ideology_power_hungry
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_anti_human_rights
							has_ideology = ideology:ideology_agitator_pro_war_rights
						
							has_ideology = ideology:ideology_autocratic
							has_ideology = ideology:ideology_power_hungry
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_anti_human_rights
							has_ideology = ideology:ideology_agitator_pro_war_rights
						
							has_ideology = ideology:ideology_autocratic
							has_ideology = ideology:ideology_power_hungry
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						OR = {
							has_ideology = ideology:ideology_agitator_anti_human_rights
							has_ideology = ideology:ideology_agitator_pro_war_rights
						
							has_ideology = ideology:ideology_autocratic
							has_ideology = ideology:ideology_power_hungry
						}
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_anti_human_rights
					}
				}
			}
		}
		
		if = {
			limit = { 
				is_a_communist_government = yes 
				scope:target_country = { 
					empty_agitator_slots >= 1 
					NOT = { is_a_communist_government = yes }
				}
			}
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_communist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_communist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_communist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_communist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_communist
					}
				}
			}
		}
		
		if = {
			limit = { 
				is_a_regime_monarchy = yes 
				scope:target_country = { 
					empty_agitator_slots >= 1 
					NOT = { is_a_regime_monarchy = yes }
				}
			}
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_monarchist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_monarchist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_monarchist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_monarchist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_monarchist
					}
				}
			}
		}
		
		if = {
			limit = { 
				is_a_nationalist_government = yes 
				scope:target_country = { 
					empty_agitator_slots >= 1 
					NOT = { is_a_nationalist_government = yes }
				}
			}
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_nationalist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_nationalist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_nationalist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_nationalist
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_nationalist
					}
				}
			}
		}
		
		if = {
			limit = { 
				is_a_theocratic_government = yes 
				scope:target_country = { 
					empty_agitator_slots >= 1 
					NOT = { is_a_theocratic_government = yes }
				}
			}
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_theocrat
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_theocrat
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_theocrat
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_theocrat
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_theocrat
					}
				}
			}
		}
		
		if = {
			limit = { 
				is_a_democracy = yes 
				scope:target_country = { 
					empty_agitator_slots >= 1 
					NOT = { is_a_democracy = yes }
				}
			}
			if = {
				limit = { 
					any_scope_character = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_republican
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					} 
				}
				random_scope_character = {
					limit = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_republican
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
						is_historical = no
					}
					transfer_character = scope:target_country
				}
			}
			else_if = {
				limit = { 
					any_character_in_exile_pool = {
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_republican
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
				}
				random_character_in_exile_pool = {
					limit = { 
						has_role = agitator 
						has_ideology = ideology:ideology_agitator_republican
						NOT = {
							culture = {
								culture_is_discriminated_in = scope:target_country
							}
						}
					}
					transfer_character = scope:target_country
				}
			}
			else = {
				scope:target_country = {
					create_character = {
						is_agitator = yes
						ideology = ideology_agitator_republican
					}
				}
			}
		}
		
		#Gain infamy
		create_incident = {
			country = scope:target_country
			value = 5
		}
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			infamy < infamy_threshold:infamous
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Manipulate Politics
conduct_hostile_espionage_8 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
	}
	
	possible = {
		
		#TARGET is an independent country
		scope:target_country = { 
			NOT = { is_subject_of = scope:actor }
			NOT = { has_war_with = scope:actor }
		}
		
		#TARGET politics is suceptible to manipulation
		scope:target_country = {
			OR = { 
				is_a_democracy = yes
				has_modifier = power_vacuum_modifier
				has_modifier = domestic_unrest
				has_modifier = stirrings_of_revolution
			}
		}
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_50_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 50
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_50_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -50
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Gain infamy
		change_infamy = 5
		
		#Reduce Relations
		save_scope_as = manipulator_country
		scope:target_country = { save_scope_as = manipulated_country }
		custom_tooltip = manipulating_government.tt
		change_relations = { country = scope:target_country value = -50 }
		
	}
	
	pact = {	
		cost = 200
		is_two_sided_pact = no
		infamy_affects_maintenance = yes
		
		income_transfer = 0.01
		max_paying_country_income_to_transfer = 0.05
		second_country_gets_income_transfer = yes
		income_transfer_based_on_second_country = yes
		
		### Validation requirements ###
		
		requirement_to_maintain = { 
		
			trigger = { 
			
				hidden_trigger = { has_journal_entry = je_secret_police_system }
	
				#THIS has spies in TARGET
				has_diplomatic_pact = {
					who = scope:target_country
					type = conduct_hostile_espionage
					is_initiator = yes
				}
				
				#TARGET is an independent country
				scope:target_country = { 
					NOT = { is_subject_of = scope:actor }
					NOT = { has_war_with = scope:actor }
				}
				
				#TARGET politics is suceptible to manipulation
				scope:target_country = { 
					OR = { 
						is_a_democracy = yes
						has_modifier = power_vacuum_modifier
						has_modifier = domestic_unrest
						has_modifier = stirrings_of_revolution
					}
				}
				
			}
			
		}
		
		### Yearly Effect ###
		
		yearly_effect = {
			
			#Event to start enactment of law
			ruler ?= {
				interest_group = {
					save_scope_as = manipulator_country_IG
				}
			}
			scope:target_country = {
				if = {
					limit = { exists = scope:manipulator_country_IG }
					random_interest_group = {
						limit = { is_same_interest_group_type = scope:manipulator_country_IG }
						save_scope_as = target_interest_group
						random_preferred_law = {
							limit = { can_be_enacted = yes }
							save_scope_as = law_to_be_enacted
						}
					}
				}
				if = {
					limit = { 
						exists = scope:law_to_be_enacted
						enacting_any_law = no 
						NOT = { has_variable = manipulate_politics_timer }
					}
					if = {
						limit = { NOT = { has_law = law_type:law_secret_police } }
						random_list = {
							1 = { 
								trigger_event = { id = reserve_powers_system.6 } 
								set_variable = {
									name = manipulate_politics_timer
									months = 1
								}
							}
							1 = { }
						}
					}
					else = {
						random_list = {
							1 = { 
								trigger_event = { id = reserve_powers_system.6 } 
								set_variable = {
									name = manipulate_politics_timer
									months = 1
								}
							}
							4 = { }
						}
					}
				}
			}
			
		}
		
		# Break effects
		manual_break_effect = {
			change_infamy = -5
		}
		
		auto_break_effect = {
			change_infamy = -5
		}
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			infamy < infamy_threshold:infamous
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Spread Propaganda
conduct_hostile_espionage_9 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
	}
	
	possible = {
		
		#TARGET has an open media to exploit
		scope:target_country = { 
			country_has_an_open_media = yes 
		}
		
		#Has diplomats
		NOR = { 
			has_diplomats_expelled = scope:target_country
			scope:target_country = { has_diplomats_expelled = scope:actor }
		}
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_25_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 25
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_25_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -25
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Increase appeasement of both sides
		add_lobby_appeasement_from_diplomacy_unidirectional = { 
			FIRST = scope:target_country
			SECOND = root
			PRO_AMOUNT = 2
			ANTI_AMOUNT = 2
			FACTOR = appeasement_embargo_declared
		}
		
		#Gain infamy
		change_infamy = 5
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.25		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			infamy < infamy_threshold:infamous
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}

#Create diplomatic incident
conduct_hostile_espionage_10 = {
	groups= { general } requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		
	}

	potential = {
	
		hidden_trigger = { has_journal_entry = je_secret_police_system }
	
		#THIS has spies in TARGET
		has_diplomatic_pact = {
			who = scope:target_country
			type = conduct_hostile_espionage
			is_initiator = yes
		}
		
	}
	
	possible = {
		
		#TARGET has rivals or neighbouring countries
		any_country = { 
			OR = { 
				is_adjacent_to_country = ROOT
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
			}
		}
		
		#Has enough action points
		custom_tooltip = {
			text = secret_police_action_50_points.tt
			has_variable = secret_police_action_points
			root.var:secret_police_action_points > 50
		}
		
		#Cooldown
		custom_tooltip = {
			text = secret_police_action_timer.tt
			NOT = { has_variable = secret_police_action_timer }
		}
		
		#TARGET is not already very infamous
		scope:target_country = {
			infamy < infamy_threshold:pariah
		}
		
	}
	
	accept_effect = {
		
		#Subtract action points
		custom_tooltip = {
			text = secret_police_action_subtract_50_points.tt
			if = {
				limit = { has_variable = secret_police_action_points }
				change_variable = { 
					name = secret_police_action_points
					add = -50
				}
			}
		}
		
		#Gain Loyalty
		custom_tooltip = {
			text = secret_police_gain_loyalty_5_points.tt
			change_variable = { 
				name = secret_police_loyalty
				add = 5
			}
			clamp_variable = {
				name = secret_police_loyalty
				max = 100
				min = 0
			}
		}
		
		#Decrease appeasement of both sides
		random_country = { 
			limit = { 
				OR = { 
					is_adjacent_to_country = ROOT
					has_diplomatic_pact = { who = scope:target_country type = rivalry }
				}
			}
			save_scope_as = third_party_country
		}
		if = {
			limit = { exists = scope:third_party_country }
			scope:target_country = {
				create_incident = {
					country = scope:third_party_country
					value = 5
				}
			}
		}
		add_lobby_appeasement_from_diplomacy_unidirectional = { 
			FIRST = root
			SECOND = scope:target_country
			PRO_AMOUNT = -1
			ANTI_AMOUNT = 1
			FACTOR = appeasement_embargo_declared
		}
		change_relations = { country = scope:target_country value = -15 }
		
		#Gain infamy
		change_infamy = 2
		
	}
	
	ai = {
	
		evaluation_chance = {
			value = 0.05		
		}
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			infamy < infamy_threshold:infamous
			OR = { 
				has_attitude = { who = scope:target_country attitude = antagonistic }
				has_attitude = { who = scope:target_country attitude = belligerent }
				has_attitude = { who = scope:target_country attitude = domineering }
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}