base_impose_law_weight= {
	value = 0.01

	# Impose law is a fairly hostile act, AIs should use it mostly when angry at a subject
	if = {
		limit = {
			has_attitude = {
				who = scope:target_country
				attitude = domineering
			}
		}
		multiply = 0.5
	}

	# Non ideological unions make less use of this
	if = {
		limit = {
			NOT = { power_bloc ?= { has_identity = identity:identity_ideological_union } }
		}
		multiply = 0.5
	}

	# Less likely to do this to subjects unless LD is low
	if = {
		limit = {
			scope:target_country = {
				is_subject = yes
				liberty_desire > 25
			}
		}
		multiply = 0.5
	}

	# Shouldn't care much about meddling in really tiny countries
	if = {
		limit = {
			scope:target_country = {
				gdp < 1000000
			}
		}
		multiply = 0.25
	}
	else_if = {
		limit = {
			scope:target_country = {
				gdp < 2500000
			}
		}
		multiply = 0.5
	}
	else_if = {
		limit = {
			scope:target_country = {
				gdp < 5000000
			}
		}
		multiply = 0.75
	}

	# Impact of AI strategies
	if = {
		limit = {
			has_strategy = ai_strategy_world_revolution
		}
		multiply = 5
	}
	else_if = {
		limit = {
			OR = {
				has_strategy = ai_strategy_anti_imperialism
				has_strategy = ai_strategy_maintain_power_balance
			}
		}
		multiply = 2
	}
	else_if = {
		limit = {
			OR = {
				has_strategy = ai_strategy_armed_isolationism
				has_strategy = ai_strategy_socialism_in_one_country
			}
		}
		multiply = 0.5
	}

}


wanted_army_size_script_value = {
	# How many levels of barracks should the AI have
	# Using this value in other strategies will function additively
	value = 0

	# To increase base army size for small countries, capped at 1 million population
	add = {
		value = cached_ai_incorporated_population
		divide = 1000000 # 1 level of barracks per 100k incorporated population

		max = 10
	}

	add = {
		value = cached_ai_incorporated_population
		divide = 2500000 # 1 level of barracks per 250k incorporated population
	}

	add = {
		value = cached_ai_unincorporated_population
		divide = 10000000 # 1 level of barracks per 1 million unincorporated population
	}

	# Coastal population reduces spending on army as that spending is needed for navy too
	subtract = {
		value = cached_ai_incorporated_coastal_population
		divide = 10000000
	}

	subtract = {
		value = cached_ai_unincorporated_coastal_population
		divide = 40000000
	}

	# Extra army size from rank
	if = {
		limit = { country_rank = rank_value:super_power }
		add = 50
	}
	if = {
		limit = { country_rank = rank_value:great_power }
		add = 25
	}
	if = {
		limit = { country_rank = rank_value:major_power }
		add = 10
	}

	save_temporary_value_as = pre_overseas_empire_value

	# Countries with a huge overseas subject population should focus more on navy
	subtract = {
		value = cached_ai_overseas_subject_population
		divide = 20000000
		max = {
			value = scope:pre_overseas_empire_value
			divide = 2
		}
	}

	max = 200 # No more than 200 from population & rank

	if = {
		limit = {
			cached_ai_incorporated_population > 0
			cached_ai_incorporated_coastal_population > 0
		}

		add = {
			value = fixed_income
			multiply = {
				value = 1
				subtract = { # Coastal population reduces spending on army as that spending is needed for navy too
					value = cached_ai_incorporated_coastal_population
					divide = cached_ai_incorporated_population
					divide = 2
				}
			}
			divide = 25000 # 1 level of barracks per 25k income
		}
	}

	# More advanced standing armies are expensive and should be smaller relative to population
	if = {
		limit = { has_technology_researched = tech_military_theory_2 }
		multiply = 0.8
	}

	if = {
		limit = { has_technology_researched = tech_military_theory_4 }
		multiply = 0.8
	}

	if = {
		limit = { has_technology_researched = tech_military_theory_6 }
		multiply = 0.8
	}

	if = {
		limit = { has_technology_researched = tech_military_theory_8 }
		multiply = 0.8
	}
	
	if = {
		limit = { has_technology_researched = tech_military_theory_10 }
		multiply = 0.8
	}

	# Factor in strategies
	if = {
		limit = {
			OR = {
				has_strategy = ai_strategy_territorial_expansion 
				has_strategy = ai_strategy_unify_germany
				has_strategy = ai_strategy_unify_italy
				has_strategy = ai_strategy_unify_ethiopia
				has_strategy = ai_strategy_unify_china
			}
		}
		multiply = 1.25
	}

	#Army model
	if = {
		limit = { has_law_or_variant = law_type:law_national_militia }
		multiply = 0.33
	}
	
	# Scale army size to rank
	#if = {
	#	limit = { country_rank = rank_value:super_power }
	#	multiply = 2
	#}
	if = {
		limit = { country_rank >= rank_value:great_power }
		multiply = 0.80
	}
	if = {
		limit = { country_rank = rank_value:major_power }
		multiply = 0.60
	}
	if = {
		limit = { country_rank = rank_value:minor_power }
		multiply = 0.40
	}
	if = {
		limit = { country_rank < rank_value:minor_power }
		multiply = 0.20
	}
	
	#Rivals
	if = {
		limit = { 
			num_rivals >= 3
		}
		multiply = 1.75
	}
	else_if = {
		limit = { 
			num_rivals >= 2
		}
		multiply = 1.50
	}
	else_if = {
		limit = { 
			num_rivals >= 1
		}
		multiply = 1.25
	}
	
	#Revolutionary Governments
	if = {
		limit = { 
			is_a_dictatorship = yes
		}
		multiply = 2
	}
	
	#Neutrality
	if = {
		limit = { is_neutral = yes }
		multiply = 0.1
	}
	
	#AI does not bankrupt itself
	if = {
		limit = { 
			is_at_war = no
			has_healthy_economy = no
		}
		multiply = 0.25
	}

	min = {
		value = 1

		if = { #If accepted Negotiation quest, build barracks until JE ends
			limit = {
				has_journal_entry = je_negotiate_army_quest
			}
			add = {
				every_interest_group = { #first get the desired app from the IG
					limit = {
						has_variable = desired_army_size
					}
					add = var:desired_army_size
				}
				divide = average_barracks_power_projection #divide by the amount of barracks this will need based on average barracks power projection
				multiply = 1.10 #safety margin
			}
		}
		
	}
}

wanted_navy_size_script_value = {
	value = 0

	# 1 level of naval base per 500k coastal incorporated population
	add = {
		value = cached_ai_incorporated_coastal_population
		divide = 500000
	}
	# 1 level of naval base per 2 million coastal unincorporated population
	add = {
		value = cached_ai_unincorporated_coastal_population
		divide = 2000000
	}
	# 1 level of naval base per 10 million population in direct overseas subjects
	add = {
		value = cached_ai_overseas_subject_population
		divide = 10000000
	}
	max = 100 # No more than 100 from population
	# 1 level of naval base per 5k income, multiplied by relative incorporated coastal population to total incorporated population
	if = {
		limit = {
			cached_ai_incorporated_population > 0
			cached_ai_incorporated_coastal_population > 0
		}
		add = {
			value = fixed_income
			divide = cached_ai_incorporated_population
			multiply = cached_ai_incorporated_coastal_population
			divide = 5000
		}
	}
	
	# GPs and MPs should want to maintain a bit of a navy
	if = {
		limit = { country_rank = rank_value:super_power }
		add = 50
	}
	else_if = {
		limit = { country_rank = rank_value:major_power }
		add = 25
	}
	else_if = {
		limit = { country_rank = rank_value:major_power }
		add = 10
	}
	
	# More advanced navies are expensive and should be smaller relative to population
	if = {
		limit = { has_technology_researched = tech_military_naval_forces_2 }
		multiply = 0.80
	}
	if = {
		limit = { has_technology_researched = tech_military_naval_forces_4 }
		multiply = 0.80
	}
	if = {
		limit = { has_technology_researched = tech_military_naval_forces_6 }
		multiply = 0.80
	}
	if = {
		limit = { has_technology_researched = tech_military_naval_forces_8 }
		multiply = 0.80
	}
	if = {
		limit = { has_technology_researched = tech_military_naval_forces_10 }
		multiply = 0.80
	}

	# Factor in strategies
	if = {
		limit = {
			OR = {
				has_strategy = ai_strategy_colonial_expansion
				has_strategy = ai_strategy_economic_imperialism
			}
		}
		multiply = 1.15
	}
	if = {
		limit = { has_strategy = ai_strategy_armed_isolationism }
		multiply = 0.75
	}
	if = {
		limit = { has_strategy = ai_strategy_maintain_mandate_of_heaven }
		multiply = 0.25
	}
	
	# GPs and MPs should want to maintain a bit of a navy
	if = {
		limit = { country_rank = rank_value:super_power }
		multiply = 2
	}
	if = {
		limit = { country_rank >= rank_value:great_power }
		multiply = 1.50
	}
	if = {
		limit = { country_rank = rank_value:minor_power }
		multiply = 0.50
	}
	if = {
		limit = { country_rank < rank_value:minor_power }
		multiply = 0.25
	}

	#Neutrality
	if = {
		limit = { is_neutral = yes }
		multiply = 0.1
	}

	#AI does not bankrupt itself
	if = {
		limit = { 
			is_at_war = no
			has_healthy_economy = no
		}
		multiply = 0.25
	}
	
	min = 1
}