je_evolve_civil_service = {
	icon = "gfx/interface/icons/law_icons/elected_bureaucrats.dds"

	group = je_group_internal_affairs

	possible = {
		
		#Civil Service is politicised
		has_law_or_variant = law_type:law_elitist_bureaucrats
		
		custom_tooltip = {
			text = je_evolved_civil_service_3.tt
			
			NAND = {
	
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_right_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_far_right_economy } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_right_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_right_economy } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_centre_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_centre_economy } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_left_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_left_economy } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_left_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_far_left_economy } }
				}
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_natural_resource_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_natural_resource_focus } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_manufacturing_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_manufacturing_focus } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_services_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_services_focus } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_no_economic_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_no_economic_focus } }
				}
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_anti_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_anti_environment } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_balanced_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_balanced_environment } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_pro_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_pro_environment } }
				}
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_nationalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_nationalist } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_regionalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_regionalist } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_globalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_globalist } }
				}
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_totalitarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_totalitarian } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_authoritarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_authoritarian } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communitarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_communitarian } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_individualist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_individualist } }
				}
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_traditionalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_traditionalist } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_conservative } ig:ig_intelligentsia = { has_ideology = ideology:ideology_conservative } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_progressive } ig:ig_intelligentsia = { has_ideology = ideology:ideology_progressive } }
				}
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_monarchist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_monarchist } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_republican } ig:ig_intelligentsia = { has_ideology = ideology:ideology_republican } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_theocrat } ig:ig_intelligentsia = { has_ideology = ideology:ideology_theocrat } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_militarist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_militarist } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_communist } }
				}
			
			}
		
		}
		
	}

	immediate = {
		
		#Set CS timer
		set_variable = {
			name = evolve_civil_service_progress_var
			value = 0
		}
		set_variable = {
			name = evolve_civil_service_goal_var
			value = 0
		}
		
		#Set goal value
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_right_economy } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_far_right_economy } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_right_economy } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_right_economy } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_centre_economy } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_centre_economy } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_left_economy } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_left_economy } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_left_economy } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_far_left_economy } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_natural_resource_focus } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_natural_resource_focus } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_manufacturing_focus } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_manufacturing_focus } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_services_focus } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_services_focus } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_no_economic_focus } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_no_economic_focus } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_anti_environment } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_anti_environment } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_balanced_environment } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_balanced_environment } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_pro_environment } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_pro_environment } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_nationalist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_nationalist } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_regionalist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_regionalist } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_globalist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_globalist } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_totalitarian } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_totalitarian } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_authoritarian } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_authoritarian } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communitarian } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_communitarian } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_individualist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_individualist } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_traditionalist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_traditionalist } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_conservative } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_conservative } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_progressive } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_progressive } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		if = {
			limit = {
				OR = {
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_monarchist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_monarchist } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_republican } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_republican } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_theocrat } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_theocrat } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_militarist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_militarist } } }
					AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communist } ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_communist } } }
				}
			}
			change_variable = {
				name = evolve_civil_service_goal_var
				add = 1
			}
		}
		
	}
	
	invalid = {
	
		#Civil Service is no longer politicised
		NOT = { has_law_or_variant = law_type:law_elitist_bureaucrats }
		
	}
	
	on_invalid = {
	
		#Clear variables
		remove_variable = evolve_civil_service_progress_var
		remove_variable = evolve_civil_service_goal_var
		
	}

	current_value = {
		value =	root.var:evolve_civil_service_progress_var
	}

	goal_add_value = {
		add = root.var:evolve_civil_service_goal_var
	}

	on_monthly_pulse = {
		
		effect = {
			
			#Change ideology
			random_list = {
				
				7 = {
					
				}
				
				#General Economic Beliefs
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_right_economy }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_far_right_economy } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_far_right_economy
							remove_ideology = ideology_right_economy
							remove_ideology = ideology_centre_economy
							remove_ideology = ideology_left_economy
							remove_ideology = ideology_far_left_economy
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_right_economy }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_right_economy } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_far_right_economy
							add_ideology = ideology_right_economy
							remove_ideology = ideology_centre_economy
							remove_ideology = ideology_left_economy
							remove_ideology = ideology_far_left_economy
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_centre_economy }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_centre_economy } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_far_right_economy
							remove_ideology = ideology_right_economy
							add_ideology = ideology_centre_economy
							remove_ideology = ideology_left_economy
							remove_ideology = ideology_far_left_economy
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_left_economy }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_left_economy } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_far_right_economy
							remove_ideology = ideology_right_economy
							remove_ideology = ideology_centre_economy
							add_ideology = ideology_left_economy
							remove_ideology = ideology_far_left_economy
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_left_economy }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_far_left_economy } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_far_right_economy
							remove_ideology = ideology_right_economy
							remove_ideology = ideology_centre_economy
							remove_ideology = ideology_left_economy
							add_ideology = ideology_far_left_economy
						}
					}
					
				}
				
				#Specific Economic Beliefs
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_natural_resource_focus }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_natural_resource_focus } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_natural_resource_focus
							remove_ideology = ideology_manufacturing_focus
							remove_ideology = ideology_services_focus
							remove_ideology = ideology_no_economic_focus
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_manufacturing_focus }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_manufacturing_focus } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_natural_resource_focus
							add_ideology = ideology_manufacturing_focus
							remove_ideology = ideology_services_focus
							remove_ideology = ideology_no_economic_focus
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_services_focus }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_services_focus } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_natural_resource_focus
							remove_ideology = ideology_manufacturing_focus
							add_ideology = ideology_services_focus
							remove_ideology = ideology_no_economic_focus
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_no_economic_focus }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_no_economic_focus } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_natural_resource_focus
							remove_ideology = ideology_manufacturing_focus
							remove_ideology = iideology_services_focus
							add_ideology = ideology_no_economic_focus
						}
					}
				}
				
				#Environmental Laws
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_anti_environment }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_anti_environment } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_anti_environment
							remove_ideology = ideology_balanced_environment
							remove_ideology = ideology_pro_environment
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_balanced_environment }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_balanced_environment } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_anti_environment
							add_ideology = ideology_balanced_environment
							remove_ideology = ideology_pro_environment
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_pro_environment }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_pro_environment } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_anti_environment
							remove_ideology = ideology_balanced_environment
							add_ideology = ideology_pro_environment
						}
					}
				}
				
				#Foreign Economic Policy
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_nationalist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_nationalist } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_nationalist
							remove_ideology = ideology_regionalist
							remove_ideology = ideology_globalist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_regionalist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_regionalist } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_nationalist
							add_ideology = ideology_regionalist
							remove_ideology = ideology_globalist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_globalist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_globalist } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_nationalist
							remove_ideology = ideology_regionalist
							add_ideology = ideology_globalist
						}
					}
				}
				
				#General Political Beliefs
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_totalitarian }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_totalitarian } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_totalitarian
							remove_ideology = ideology_authoritarian
							remove_ideology = ideology_communitarian
							remove_ideology = ideology_individualist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_authoritarian }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_authoritarian } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_totalitarian
							add_ideology = ideology_authoritarian
							remove_ideology = ideology_communitarian
							remove_ideology = ideology_individualist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communitarian }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_communitarian } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_totalitarian
							remove_ideology = ideology_authoritarian
							add_ideology = ideology_communitarian
							remove_ideology = ideology_individualist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_individualist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_individualist } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_totalitarian
							remove_ideology = ideology_authoritarian
							remove_ideology = ideology_communitarian
							add_ideology = ideology_individualist
						}
					}
				}
				
				#Specific Political Beliefs
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_traditionalist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_traditionalist } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_traditionalist
							remove_ideology = ideology_conservative
							remove_ideology = ideology_progressive
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_conservative }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_conservative } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_traditionalist
							add_ideology = ideology_conservative
							remove_ideology = ideology_progressive
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_progressive }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_progressive } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_traditionalist
							remove_ideology = ideology_conservative
							add_ideology = ideology_progressive
						}
					}
				}
				
				#Government Types
				1 = {
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_monarchist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_monarchist } }
						}
						ig:ig_intelligentsia = {
							add_ideology = ideology_monarchist
							remove_ideology = ideology_republican
							remove_ideology = ideology_theocrat
							remove_ideology = ideology_militarist
							remove_ideology = ideology_communist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_republican }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_republican } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_monarchist
							add_ideology = ideology_republican
							remove_ideology = ideology_theocrat
							remove_ideology = ideology_militarist
							remove_ideology = ideology_communist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_theocrat }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_theocrat } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_monarchist
							remove_ideology = ideology_republican
							add_ideology = ideology_theocrat
							remove_ideology = ideology_militarist
							remove_ideology = ideology_communist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_militarist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_militarist } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_monarchist
							remove_ideology = ideology_republican
							remove_ideology = ideology_theocrat
							add_ideology = ideology_militarist
							remove_ideology = ideology_communist
						}
					}
					if = {
						limit = {
							any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communist }
							ig:ig_intelligentsia = { NOT = { has_ideology = ideology:ideology_communist } }
						}
						ig:ig_intelligentsia = {
							remove_ideology = ideology_monarchist
							remove_ideology = ideology_republican
							remove_ideology = ideology_theocrat
							remove_ideology = ideology_militarist
							add_ideology = ideology_communist
						}
					}
				}
			
			}
			
			#Add CS ticker
			set_variable = {
				name = evolve_civil_service_progress_var
				value = 0
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_right_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_far_right_economy } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_right_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_right_economy } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_centre_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_centre_economy } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_left_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_left_economy } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_left_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_far_left_economy } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_natural_resource_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_natural_resource_focus } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_manufacturing_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_manufacturing_focus } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_services_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_services_focus } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_no_economic_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_no_economic_focus } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_anti_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_anti_environment } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_balanced_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_balanced_environment } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_pro_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_pro_environment } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_nationalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_nationalist } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_regionalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_regionalist } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_globalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_globalist } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_totalitarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_totalitarian } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_authoritarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_authoritarian } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communitarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_communitarian } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_individualist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_individualist } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_traditionalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_traditionalist } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_conservative } ig:ig_intelligentsia = { has_ideology = ideology:ideology_conservative } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_progressive } ig:ig_intelligentsia = { has_ideology = ideology:ideology_progressive } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					OR = {
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_monarchist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_monarchist } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_republican } ig:ig_intelligentsia = { has_ideology = ideology:ideology_republican } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_theocrat } ig:ig_intelligentsia = { has_ideology = ideology:ideology_theocrat } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_militarist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_militarist } }
						AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_communist } }
					}
				}
				change_variable = {
					name = evolve_civil_service_progress_var
					add = 1
				}
			}
			
		}
		
	}

	complete = {
	
		custom_tooltip = {
			text = je_evolved_civil_service_2.tt
	
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_right_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_far_right_economy } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_right_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_right_economy } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_centre_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_centre_economy } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_left_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_left_economy } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_far_left_economy } ig:ig_intelligentsia = { has_ideology = ideology:ideology_far_left_economy } }
			}
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_natural_resource_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_natural_resource_focus } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_manufacturing_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_manufacturing_focus } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_services_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_services_focus } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_no_economic_focus } ig:ig_intelligentsia = { has_ideology = ideology:ideology_no_economic_focus } }
			}
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_anti_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_anti_environment } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_balanced_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_balanced_environment } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_pro_environment } ig:ig_intelligentsia = { has_ideology = ideology:ideology_pro_environment } }
			}
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_nationalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_nationalist } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_regionalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_regionalist } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_globalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_globalist } }
			}
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_totalitarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_totalitarian } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_authoritarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_authoritarian } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communitarian } ig:ig_intelligentsia = { has_ideology = ideology:ideology_communitarian } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_individualist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_individualist } }
			}
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_traditionalist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_traditionalist } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_conservative } ig:ig_intelligentsia = { has_ideology = ideology:ideology_conservative } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_progressive } ig:ig_intelligentsia = { has_ideology = ideology:ideology_progressive } }
			}
			OR = {
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_monarchist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_monarchist } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_republican } ig:ig_intelligentsia = { has_ideology = ideology:ideology_republican } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_theocrat } ig:ig_intelligentsia = { has_ideology = ideology:ideology_theocrat } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_militarist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_militarist } }
				AND = { any_interest_group = { ig_clout > 0.5 has_ideology = ideology:ideology_communist } ig:ig_intelligentsia = { has_ideology = ideology:ideology_communist } }
			}
		
		}
		
	}
	
	on_complete = {
	
		# Replace Head of the Civil Service
		custom_tooltip = {
			text = je_evolved_civil_service_1.tt
			
			if = {
				limit = { 
					any_interest_group = { ig_clout > 0.5 leader = { has_ideology = ideology:ideology_autocratic } }
					any_interest_group = { is_interest_group_type = ig:ig_intelligentsia leader = { is_historical = no NOT = { has_ideology = ideology:ideology_autocratic } } }
				}
				create_character = {
					ig_leader = yes
					interest_group = ig_intelligentsia
					ideology = ideology_autocratic
				}
			}
			if = {
				limit = { 
					any_interest_group = { ig_clout > 0.5 leader = { has_ideology = ideology:ideology_power_hungry } }
					any_interest_group = { is_interest_group_type = ig:ig_intelligentsia leader = { is_historical = no NOT = { has_ideology = ideology:ideology_power_hungry } } }
				}
				create_character = {
					ig_leader = yes
					interest_group = ig_intelligentsia
					ideology = ideology_power_hungry
				}
			}
			if = {
				limit = { 
					any_interest_group = { ig_clout > 0.5 leader = { has_ideology = ideology:ideology_elitist } }
					any_interest_group = { is_interest_group_type = ig:ig_intelligentsia leader = { is_historical = no NOT = { has_ideology = ideology:ideology_elitist } } }
				}
				create_character = {
					ig_leader = yes
					interest_group = ig_intelligentsia
					ideology = ideology_elitist
				}
			}
			if = {
				limit = { 
					any_interest_group = { ig_clout > 0.5 leader = { has_ideology = ideology:ideology_democratic } }
					any_interest_group = { is_interest_group_type = ig:ig_intelligentsia leader = { is_historical = no NOT = { has_ideology = ideology:ideology_democratic } } }
				}
				create_character = {
					ig_leader = yes
					interest_group = ig_intelligentsia
					ideology = ideology_democratic
				}
			}
			if = {
				limit = { 
					any_interest_group = { ig_clout > 0.5 leader = { has_ideology = ideology:ideology_liberal } }
					any_interest_group = { is_interest_group_type = ig:ig_intelligentsia leader = { is_historical = no NOT = { has_ideology = ideology:ideology_liberal } } }
				}
				create_character = {
					ig_leader = yes
					interest_group = ig_intelligentsia
					ideology = ideology_liberal
				}
			}
			
		}
	
		#Clear variables
		remove_variable = evolve_civil_service_progress_var
		remove_variable = evolve_civil_service_goal_var
		
	}

	weight = 100

	should_be_pinned_by_default = no

	transferable = no

	progressbar = no
}