je_armed_forces_system = {
	icon = "gfx/interface/icons/law_icons/professional_army.dds"

	group = je_group_political_organs
	
	scripted_button = je_armed_forces_system_subvert_armed_forces_button
	scripted_button = je_armed_forces_system_reform_armed_forces_button
	scripted_button = je_armed_forces_system_dismiss_military_chief_button

	is_shown_when_inactive = {
		
	}

	possible = {
		
		#THIS has an army or navy
		NOT = { has_law_or_variant = law_type:law_peasant_levies }
		any_scope_character = {
			OR = { 
				has_role = general
				has_role = admiral
			}
		}
		
	}

	immediate = {
		
		#Mark Head of Armed Forces
		if = {
			limit = {
				any_scope_character = {
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 6
				}
			}
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 6
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 5
				}
			}
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 5
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 4
				}
			}
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 4
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 3
				}
			}
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 3
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 2
				}
			}
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 2
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 1
				}
			}
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
					commander_rank >= 1
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		else = {
			random_scope_character = {
				limit = { 
					OR = { 
						has_role = general
						has_role = admiral
					}
				}
				save_scope_as = head_of_armed_forces add_modifier = { name = head_of_armed_forces }
			}
		}
		
	}
	
	invalid = {
		
		#Different Head of Armed Forces
		NOT = { exists = scope:head_of_armed_forces }
		
	}
	
	on_invalid = {
		
		#Clear modifiers
		every_scope_character = {
			limit = { has_modifier = head_of_armed_forces }
			remove_modifier = head_of_armed_forces
		}
		
	}

	on_monthly_pulse = {
		
		effect = {
			
		}
		
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = very_high_corruption_generic
				trigger = {
					has_law_or_variant = law_type:law_very_low_anti_corruption
				}
			}
			triggered_desc = {
				desc = high_corruption_generic
				trigger = {
					has_law_or_variant = law_type:law_low_anti_corruption
				}
			}
			triggered_desc = {
				desc = medium_corruption_generic
				trigger = {
					has_law_or_variant = law_type:law_medium_anti_corruption
				}
			}
			triggered_desc = {
				desc = low_corruption_generic
				trigger = {
					has_law_or_variant = law_type:law_high_anti_corruption
				}
			}
			triggered_desc = {
				desc = very_low_corruption_generic
				trigger = {
					has_law_or_variant = law_type:law_very_high_anti_corruption
				}
			}
		}
	}

	weight = 100

	should_be_pinned_by_default = no

	transferable = no

	progressbar = no
}