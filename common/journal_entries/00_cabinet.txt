je_cabinet = {
	icon = "gfx/interface/icons/law_icons/single_party_state.dds"

	scripted_button = je_issue_executive_order_button
	scripted_button = je_issue_royal_decree_button
	scripted_button = je_call_elections_button
	
	scripted_button = je_enact_state_of_emergency_button
	scripted_button = je_lift_state_of_emergency_button

	possible = {
		
		exists = ruler
		
	}

	immediate = {
	
		custom_tooltip = {
			text = ruler_is_head_of_government.tt
			ruler = { 
				if = {
					limit = { NOT = { has_modifier = THIS_is_ruler } }
					add_modifier = { name = THIS_is_ruler } 
				}
			}
			random_interest_group = {
				limit = { leader = { is_ruler = yes } }
				if = {
					limit = { NOT = { has_modifier = cabinet_minister_ig } }
					add_modifier = { name = cabinet_minister_ig }
				}
			}
		}
		
		calculate_cabinet_unity = yes
		
	}

	invalid = {
		
		custom_tooltip = {
			text = ruler_is_not_head_of_government.tt
			ruler = { NOT = { has_modifier = THIS_is_ruler } }
		}
		
	}
	
	on_invalid = {
		
		custom_tooltip = {
			text = government_resigns.tt
		
			#Clear all modifiers
			every_interest_group = {
				leader = { 
					remove_modifier = THIS_is_ruler
					remove_modifier = cabinet_minister
				}
				remove_modifier = cabinet_minister_ig
			}
			every_scope_character = {
				remove_modifier = THIS_is_ruler
				remove_modifier = cabinet_minister
			}
		
		}
		
		#Clear variables
		remove_variable = strong_cabinet_unity
		remove_variable = medium_cabinet_unity
		remove_variable = low_cabinet_unity
		remove_variable = cabinet_unity_var
		remove_variable = cabinet_unity_divisor_var
		
		#Bipartisanship
		remove_variable = has_bipartisan_plan
		every_interest_group = {
			remove_variable = bipartisan_participant
		}
		
	}
	
	on_weekly_pulse = {
	
		effect = {
		
			every_interest_group = {
				limit = { 
					is_in_government = no
					OR = {
						leader = { is_ruler = no has_modifier = THIS_is_ruler }
						leader = { has_modifier = cabinet_minister }
						has_modifier = cabinet_minister_ig
					}
				}
				leader = { 
					if = { limit = { is_ruler = no } remove_modifier = THIS_is_ruler }
					remove_modifier = cabinet_minister
				}
				remove_modifier = cabinet_minister_ig
			}
			
			calculate_cabinet_unity = yes
			
		}
		
	}
	
	on_monthly_pulse = {
	
		random_events = {
			2 = 0
			1 = cabinet_system.1
		}
		
	}

	weight = 2

	should_be_pinned_by_default = no

	transferable = no

	progressbar = no
}