namespace = after_revolution_technical

after_revolution_technical.1 = {
	type = country_event

	event_image = {
		video = "votp_barricade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	hidden = yes

	duration = 3

	cooldown = { days = normal_modifier_time }

	immediate = {
		update_party_support = yes
		every_interest_group = {
			limit = {
				is_in_government = yes
				NOT = {
					has_variable = ig_to_take_power
				}
			}
			remove_ruling_interest_group = yes
			add_modifier = {
				name = modifier_revolution_defeated_light
				months = 12
				is_decaying = yes
			}
		}
		every_interest_group = {
			limit = {
				has_variable = ig_to_take_power
			}
			abandon_revolution = yes
			if = {
				limit = {
					has_party = yes
				}
				party ?= {
					set_ruling_party = yes
				}
			}
			else = {
				add_ruling_interest_group = yes
			}
		}
		every_interest_group = {
			limit = {
				has_variable = ig_to_take_power
			}
			remove_variable = ig_to_take_power
		}
		hidden_effect = {
			if = {
				limit = {
					in_election_campaign = yes
				}
				every_active_party = { # Hidden effect to benefit liberals
					limit = {
						party_has_members = yes
						OR = {
							is_party_type = liberal_party
							is_party_type = radical_party
						}
					}
					add_momentum = momentum_very_large
				}
			}
		}
		set_immune_to_revolutions = no
	}
}
