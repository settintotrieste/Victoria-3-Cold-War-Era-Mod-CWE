namespace = ai_incompetence_management_system

#AI will not delete gov admins
ai_incompetence_management_system.1 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#No gov admins in incorporated states
		OR = { 
			any_scope_state = { 
				is_incorporated = yes 
				NOT = { has_building = building_government_administration }
			}
			AND = {
				any_scope_state = { 
					is_incorporated = yes 
					NOT = { has_building = building_university }
				}
				in_default = no
			}
		}
		
	}

	immediate = {
		
		#Add gov admin for AI
		every_scope_state = {
			limit = { 
				is_incorporated = yes 
				NOT = { has_building = building_government_administration }
			}
			create_building = {
				building = "building_government_administration"
				level = 1
			}
		}
		if = {
			limit = { in_default = no }
			every_scope_state = {
				limit = { 
					is_incorporated = yes 
					NOT = { has_building = building_university }
				}
				create_building = {
					building = "building_university"
					level = 1
				}
			}
		}
		
	}
	
}

#Prune buildings to increase performance
ai_incompetence_management_system.2 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#Disabled for now
		#always = no
		
		#AI only event OR has free markets
		OR = { 
			is_player = no
			has_law_or_variant = law_type:law_laissez_faire
		}
		
		#NOT at war
		is_at_war = no
		
	}

	immediate = {
		
		#Notify player of deletion
		if = {
			limit = { 
				is_player = yes 
				has_law_or_variant = law_type:law_laissez_faire
			}
			post_notification = auto_delete_building_notification
		}
		
		#Delete all inactive buildings
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_wheat_farm is_a_useless_building = yes } } remove_building = building_wheat_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_rice_farm is_a_useless_building = yes } } remove_building = building_rice_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_rye_farm is_a_useless_building = yes } } remove_building = building_rye_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_maize_farm is_a_useless_building = yes } } remove_building = building_maize_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_millet_farm is_a_useless_building = yes } } remove_building = building_millet_farm } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_fishing_wharf is_a_useless_building = yes } } remove_building = building_fishing_wharf } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_livestock_ranch is_a_useless_building = yes } } remove_building = building_livestock_ranch } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_banana_plantation is_a_useless_building = yes } } remove_building = building_banana_plantation } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_rubber_plantation is_a_useless_building = yes } } remove_building = building_rubber_plantation } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_coffee_plantation is_a_useless_building = yes } } remove_building = building_coffee_plantation } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_tea_plantation is_a_useless_building = yes } } remove_building = building_tea_plantation } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_tobacco_plantation is_a_useless_building = yes } } remove_building = building_tobacco_plantation } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_vineyard is_a_useless_building = yes } } remove_building = building_vineyard } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_cotton_plantation is_a_useless_building = yes } } remove_building = building_cotton_plantation } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_opium_plantation is_a_useless_building = yes } } remove_building = building_opium_plantation } }
		
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_coal_power_plant is_a_useless_building = yes } } remove_building = building_coal_power_plant } }
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_power_plant is_a_useless_building = yes } } remove_building = building_power_plant } }
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_nuclear_power_plant is_a_useless_building = yes } } remove_building = building_nuclear_power_plant } }
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_hydroelectric_power_plant is_a_useless_building = yes } } remove_building = building_hydroelectric_power_plant } }
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_geothermal_power_plant is_a_useless_building = yes } } remove_building = building_geothermal_power_plant } }
		
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_railway is_a_useless_building = yes } } remove_building = building_railway } }
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_port is_a_useless_building = yes } } remove_building = building_port } }
		
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_communications_network is_a_useless_building = yes } } remove_building = building_communications_network } }
		
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_skyscraper is_a_useless_building = yes } } remove_building = building_skyscraper } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_logging_camp is_a_useless_building = yes } } remove_building = building_logging_camp } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_ammunition_factory is_a_useless_building = yes } } remove_building = building_ammunition_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_small_arms_factory is_a_useless_building = yes } } remove_building = building_small_arms_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_artillery_factory is_a_useless_building = yes } } remove_building = building_artillery_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_tanks_factory is_a_useless_building = yes } } remove_building = building_tanks_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_warplanes_factory is_a_useless_building = yes } } remove_building = building_warplanes_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_military_shipyard is_a_useless_building = yes } } remove_building = building_military_shipyard } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_advanced_weaponry_factory is_a_useless_building = yes } } remove_building = building_advanced_weaponry_factory } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_aeroplanes_factory is_a_useless_building = yes } } remove_building = building_aeroplanes_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_shipyard is_a_useless_building = yes } } remove_building = building_shipyard } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_locomotives_factory is_a_useless_building = yes } } remove_building = building_locomotives_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_automobiles_factory is_a_useless_building = yes } } remove_building = building_automobiles_factory } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_consumer_robots_factory is_a_useless_building = yes } } remove_building = building_consumer_robots_factory } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_groceries_factory is_a_useless_building = yes } } remove_building = building_groceries_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_furniture_factory is_a_useless_building = yes } } remove_building = building_furniture_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_art_academy is_a_useless_building = yes } } remove_building = building_art_academy } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_telecommunications_factory is_a_useless_building = yes } } remove_building = building_telecommunications_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_computers_factory is_a_useless_building = yes } } remove_building = building_computers_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_industrial_robots_factory is_a_useless_building = yes } } remove_building = building_industrial_robots_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_steel_factory is_a_useless_building = yes } } remove_building = building_steel_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_industrial_chemicals_factory is_a_useless_building = yes } } remove_building = building_industrial_chemicals_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_pharmaceuticals_factory is_a_useless_building = yes } } remove_building = building_pharmaceuticals_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_circuit_boards_factory is_a_useless_building = yes } } remove_building = building_circuit_boards_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_engines_factory is_a_useless_building = yes } } remove_building = building_engines_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_textile_mills is_a_useless_building = yes } } remove_building = building_textile_mills } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_plastics_factory is_a_useless_building = yes } } remove_building = building_plastics_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_liquor_factory is_a_useless_building = yes } } remove_building = building_liquor_factory } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_synthetic_rubber_factory is_a_useless_building = yes } } remove_building = building_synthetic_rubber_factory } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_gold_mine is_a_useless_building = yes } } remove_building = building_gold_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_gold_field is_a_useless_building = yes } } remove_building = building_gold_field } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_iron_mine is_a_useless_building = yes } } remove_building = building_iron_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_lead_mine is_a_useless_building = yes } } remove_building = building_lead_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_coal_mine is_a_useless_building = yes } } remove_building = building_coal_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_oil_rig is_a_useless_building = yes } } remove_building = building_oil_rig } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_sulfur_mine is_a_useless_building = yes } } remove_building = building_sulfur_mine } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_retail_services_sector is_a_useless_building = yes } } remove_building = building_retail_services_sector } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_corporate_services_industry is_a_useless_building = yes } } remove_building = building_corporate_services_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_professional_services_sector is_a_useless_building = yes } } remove_building = building_professional_services_sector } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_software_industry is_a_useless_building = yes } } remove_building = building_software_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_recreational_services_sector is_a_useless_building = yes } } remove_building = building_recreational_services_sector } }
		
	}
	
}

#Democratic AI does not exceed infamy limits
ai_incompetence_management_system.3 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#AI country is a proper democracy
		is_a_democracy = yes
		
		#High infamy
		infamy >= infamy_threshold:infamous
		
	}

	immediate = {
		
		change_infamy = -20
		
	}
	
}

#Help communist AI to avoid bankruptcy
ai_incompetence_management_system.5 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#Only when historical railroading is active
		has_global_variable = historical_railroading_active
		
		#AI only event
		is_player = no
		
		#MPs only
		OR = { 
			country_rank >= rank_value:major_power
			country_rank >= rank_value:unrecognized_regional_power
			c:PRC ?= this
		}
		
		#AI country is communist
		is_a_communist_government = yes
		is_at_war = no
		
		#Low treasury
		scaled_debt > 0
		
	}

	immediate = {
		
		if = {
			limit = { 
				OR = { 
					country_rank = rank_value:super_power 
					c:PRC ?= this
				}
			}
			add_treasury = 20000000
		}
		else_if = {
			limit = { country_rank = rank_value:great_power }
			add_treasury = 10000000
		}
		else = {
			add_treasury = 5000000
		}
		
	}
	
}

#Help AI have navy and army to fight wars
ai_incompetence_management_system.6 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#AI country is at war
		is_at_war = yes
		
		#No barracks
		OR = {
			NOT = { has_building = building_barrack }
			AND = { 
				has_port = yes
				NOT = { has_building = building_naval_base }
			}
		}
		
	}

	immediate = {
		
		every_scope_state = {
			limit = { is_incorporated = yes }
			if = {
				limit = { NOT = { has_building = building_barrack } }
				create_building = {
					building = "building_barrack"
					level = 1
				}
			}
			if = {
				limit = { 
					has_port = yes
					NOT = { has_building = building_naval_base }
				}
				create_building = {
					building = "building_naval_base"
					level = 1
				}
			}
		}
		
	}
	
}

#AI will not destroy all trade centres
ai_incompetence_management_system.7 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#Has world market access
		capital.world_market_access > 0
		
		#No trade center in incorporated states
		any_scope_state = { 
			is_incorporated = yes 
			NOT = { has_building = building_trade_center }
		}
		
	}

	immediate = {
		
		#Add trade center for AI
		every_scope_state = {
			limit = {
				is_incorporated = yes 
				NOT = { has_building = building_trade_center }
			}
			create_building = {
				building = "building_trade_center"
				level = 1
			}
		}
		
	}
	
}

#Transit Rights
ai_incompetence_management_system.8 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#Independent market
		is_junior_in_customs_union = no
		
		#No world market access
		capital.world_market_access = 0
		
		#At peace
		is_at_war = no
		
		#No transit rights
		NOT = { 
			any_scope_treaty = {
				binds = ROOT
				any_scope_article = {
					has_type = transit_rights
				}
			}
		}
		
		#Any country to create transit rights with
		trigger_if = {
			limit = { is_a_communist_government = yes }
			any_country = {
				is_adjacent_to_country = ROOT
				capital.world_market_access > 0
				is_a_communist_government = yes
				is_sufficiently_independent = yes
				is_at_war = no
			}
		}
		trigger_else = {
			any_country = {
				is_adjacent_to_country = ROOT
				capital.world_market_access > 0
				is_sufficiently_independent = yes
				is_at_war = no
			}
		}
		
	}

	immediate = {
		
		# Create transit rights
		if = {
			limit = { is_a_communist_government = yes }
			random_country = {
				limit = {
					is_adjacent_to_country = ROOT
					capital.world_market_access > 0
					is_a_communist_government = yes
					is_sufficiently_independent = yes
					is_at_war = no
				}
				create_treaty = {
					name = treaty_name_generic_transit_rights
					first_country = THIS
					second_country = ROOT

					is_draft = no
					binding_period = { years = 10 } # 10 years

					articles_to_create = {
						{
							article = transit_rights
							source_country = THIS
							target_country = ROOT
						}
					}
				}
			}
		}
		else = {
			random_country = {
				limit = {
					is_adjacent_to_country = ROOT
					capital.world_market_access > 0
					is_sufficiently_independent = yes
					is_at_war = no
				}
				create_treaty = {
					name = treaty_name_generic_transit_rights
					first_country = THIS
					second_country = ROOT

					is_draft = no
					binding_period = { years = 10 } # 10 years

					articles_to_create = {
						{
							article = transit_rights
							source_country = THIS
							target_country = ROOT
						}
					}
				}
			}
		}
		
	}
	
}